# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø–æ —Ç—Ä–µ–π—Å–∏–Ω–≥—É

## –ú–æ—Ç–∏–≤–∞—Ü–∏—è

–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–Ω—è—Ç—å, –≥–¥–µ –∏–º–µ–Ω–Ω–æ "–∑–∞–≤–∏—Å–∞–µ—Ç" –∑–∞–∫–∞–∑:
- –°—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö (–º–∞–≥–∞–∑–∏–Ω, CRM, MES).
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –ø–æ —Ü–µ–ø–æ—á–∫–µ.
- –ó–∞–∫–∞–∑—ã —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —á–µ—Ä–µ–∑ RabbitMQ.
- –¢—Ä—É–¥–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–±—ã—Ç–∏–π –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∑–∞–∫–∞–∑—É.

–í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞:
- –ü–æ–∑–≤–æ–ª–∏—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø—É—Ç—å –∑–∞–∫–∞–∑–∞ —Å–∫–≤–æ–∑—å –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –∏ –æ—á–µ—Ä–µ–¥–∏.
- –ü–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–∏—á–∏–Ω—ã –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ –ø–æ—Ç–µ—Ä—å.
- –£–ª—É—á—à–∏—Ç SLA, —Å–æ–∫—Ä–∞—Ç–∏—Ç –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã.
- –£–ø—Ä–æ—Å—Ç–∏—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–æ–±–ª–µ–º –∏ —É—Å–∫–æ—Ä–∏—Ç –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ.

## –°–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—É–µ—Ç –ø–æ–∫—Ä—ã—Ç—å —Ç—Ä–µ–π—Å–∏–Ω–≥–æ–º

- –û–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω (Java Spring Boot)
- CRM (Java Spring Boot)
- MES (C#)
- RabbitMQ (–æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏)
- –°–ª—É–∂–±—ã —Ä–∞—Å—á—ë—Ç–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î

## –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞–¥–∞—Ç—å –≤ —Ç—Ä–µ–π—Å–∏–Ω–≥

- `trace_id`, `span_id`, `parent_span_id`
- –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
- –ò–º—è —Å–µ—Ä–≤–∏—Å–∞
- –°—Ç–∞—Ç—É—Å (—É—Å–ø–µ—à–Ω–æ / –æ—à–∏–±–∫–∞)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞: `order_id`, `user_id`, `status`
- –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞: HTTP / RabbitMQ / –ë–î
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

## –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

- –í–Ω–µ–¥—Ä–∏—Ç—å **OpenTelemetry** –≤–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:
  - Spring Boot: —Å –ø–æ–º–æ—â—å—é `opentelemetry-javaagent`
  - C#: —á–µ—Ä–µ–∑ `OpenTelemetry-dotnet`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Jaeger** –∏–ª–∏ **Grafana Tempo** –∫–∞–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞.
- –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã, –≤—ã–∑–æ–≤—ã –∫ RabbitMQ –∏ –ë–î ‚Äî —Å propagation `trace-id`.
- –í RabbitMQ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `trace-id` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Äî —á–µ—Ä–µ–∑ Grafana (—Å –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–º —Ç—Ä–µ–π—Å–∏–Ω–≥–æ–º).

**–î–∏–∞–≥—Ä–∞–º–º–∞ C4 (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è)**  
![jewerly_c4_model-tracing.png](jewerly_c4_model-tracing.png)
üîó [–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω—É—é —Å—Ö–µ–º—É —Å —Ç—Ä–µ–π—Å–∏–Ω–≥–æ–º (Jaeger)](./jewerly_c4_model-tracing.drawio)

## –ö–æ–º–ø—Ä–æ–º–∏—Å—Å—ã

- MES –Ω–∞ C# —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏.
- OpenTelemetry –º–æ–∂–µ—Ç –¥–∞—Ç—å –Ω–µ–±–æ–ª—å—à—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–∏—Å—ã.
- –°–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å RabbitMQ (–Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ trace-id –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö).
- –ù–µ –≤—Å–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–µ–π—Å–∏–Ω–≥.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ —Ç–æ–ª—å–∫–æ –ø–æ VPN / —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö IP.
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ SSO / —Ä–æ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–æ–¥–¥–µ—Ä–∂–∫–∞", "DevOps").
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 7‚Äì14 –¥–Ω–µ–π).
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ (PII –Ω–µ –ª–æ–≥–∏—Ä—É–µ–º).

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Grafana Alerts –ø–æ trace duration:
  - –ê–ª—ë—Ä—Ç, –µ—Å–ª–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ > 15 –º–∏–Ω
  - –ê–ª—ë—Ä—Ç, –µ—Å–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω —à–∞–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ—Ç SUBMITTED –∫ PRICE_CALCULATED –∑–∞ X –º–∏–Ω—É—Ç)
- –°—Ü–µ–Ω–∞—Ä–∏–π:
  - –ó–∞–∫–∞–∑ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π.
  - –ï—Å–ª–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –Ω–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Ü–µ–ø–æ—á–∫–µ ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–∏–∫–µ—Ç + Slack-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.

